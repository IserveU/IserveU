 <!-- color maybes for loading circles and other input fields: 009cd3 -->
 <md-toolbar class="md-toolbar-tools site-content-toolbar md-whiteframe-glow-z1" style="height:10px; top: -30px"  ng-if="userIsLoggedIn" ng-cloak>
    <div layout="column" class="md-toolbar-tools" tabIndex="-1" style="padding-left: 0; background-color:#009cd3; height: 56px; position: fixed; box-shadow: 0 2px 5px 0 rgba(0,0,0,.26); z-index:5; top:0">


        <!-- TODO: make this into a universal directive, like sidebar --> 
        <motion-searchbar hide-sm hide-md hide-lg></motion-searchbar>


        <div>
            <md-button class="md-icon-button" style="margin:0;" ng-click="user.toggleSidebar('left')" hide-gt-lg aria-label="Toggle Menu">
              <md-icon class="mdi mdi-menu"></md-icon>
            </md-button>
        </div>

        <p translate="{{user.userbarservice.title}}" style="margin:0;  padding-left: 18px"></p>


        <span flex></span>

        <div>
            <md-menu>
                <md-button ng-click="$mdOpenMenu()" translate="{{ 'LANG_NAME' }}" aria-label="Change language"></md-button>
                <md-menu-content width="1" style="margin:0px">
                    <md-menu-item ng-repeat="language in user.languages">
                        <md-button ng-click="user.changeLanguage(language.key)">
                            <p flex>{{language.name}}</p>
                        </md-button>
                    </md-menu-item>
                </md-menu-content>
            </md-menu>
        </div>

        <div>
            <div class="md-toolbar-item docs-tools" layout="column" layout-gt-md="row">
                <md-menu md-position-mode="target-right target">
                    <md-button aria-label="User Menu" class="md-icon-button" ng-click="$mdOpenMenu()">
                        <md-icon class="mdi ng-scope ng-isolate-scope md-default-theme cog" md-menu-origin md-font-icon="mdi-settings" ></md-icon>
                    </md-button>
                    <md-menu-content width="4">
                        <md-menu-item>
                            <md-button aria-label="logout" ng-click="user.logout()">
                                <div layout="row">
                                    <p flex>{{ 'LOGOUT' | translate}} {{::authenticatedUser.first_name}}</p>
                                    <md-icon class="mdi" md-font-icon="mdi-logout"></md-icon>
                                </div>
                            </md-button>
                        </md-menu-item>
                        
                        <md-menu-item ui-sref="user({id:authenticatedUser.id})">
                            <md-button aria-label="go to your profile">
                                <div layout="row">
                                    <p flex translate="{{'YOUR_PROFILE'}}">Your Profile</p>
                                    <md-icon class="mdi" md-font-icon="mdi-account-circle"></md-icon>
                                </div>
                            </md-button>
                        </md-menu-item>


<!--                         <has-permission has-permission="create-background_images">
                        <md-menu-item ui-sref="backgroundimage">
                            <md-button aria-label="go to upload background image">
                                <div layout="row">
                                    <p flex translate="{{'UPLOAD_BACKGROUND_IMG'}}"></p>
                                    <md-icon class="mdi"  md-font-icon="mdi-file-image"></md-icon>
                                </div>
                            </md-button>
                        </md-menu-item>
                        </has-permission> -->
                        <has-permission has-permission="create-motions">
                        <md-menu-item ui-sref="dashboard">
                            <md-button aria-label="go to admin dashboard">
                                <div layout="row">
                                    <p flex>Admin Dashboard</p>
                                    <md-icon class="mdi"  md-font-icon="mdi-folder-multiple-outline"></md-icon>
                                </div>
                            </md-button>
                        </md-menu-item>
                        </has-permission>
                    </md-menu-content>
                </md-menu>
            </div>
        </div>
    </div>
  </md-toolbar>

