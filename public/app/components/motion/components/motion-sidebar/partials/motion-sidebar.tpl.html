<md-content role="navigation" class="flex md-default-theme" layout-fill>
  
<motion-searchbar hide-gt-lg hide-lg flex></motion-searchbar>

<div infinite-scroll="sidebar.loadMoreMotions()" 
     infinite-scroll-container="'.site-sidenav'"
     infinite-scroll-distance="0" 
     infinite-scroll-disabled="!sidebar.motionObj.next_page || sidebar.paginating || sidebar.motionObj.motionsAreEmpty">

  <md-progress-circular  style="margin:auto" class="loading-circle" md-mode="indeterminate" ng-show="!sidebar.motionObj.data.length && sidebar.motionListLoading"></md-progress-circular>

  <md-list>
    <md-list-item layout="row" class="sidebar-list-item" ng-repeat="motion in sidebar.motionObj.data | filter:sidebar.search.text" ui-sref-active="active" ng-click="sidebar.closeSidenav('left')">

    <!-- TODO: refactor and get to work properly --> 
    <loading-spinner check-if="{{motionIsLoading[motion.id]}}" layout-padding>
      <div>
        <md-icon aria-label="Motion Popularity" class="mdi" ng-class="{'mdi-arrow-top-right':motion.motion_rank > 0, 'md-primary':motion.motion_rank > 0, 'mdi-arrow-bottom-right':motion.motion_rank < 0, 'md-accent':motion.motion_rank < 0, 'mdi-equal':motion.motion_rank == 0}">
        <md-tooltip md-direction="right" ng-if="motion.motion_rank !== 0 && motion.motion_rank != null">{{ motion.motion_rank > 0 ? "Passing" : "Not passing"}}</md-tooltip>
        <md-tooltip md-direction="right" ng-if="motion.motion_rank == 0">{{'NEUTRAL' | translate}}</md-tooltip>
        </md-icon>
      </div>
    </loading-spinner>

      <p ui-sref="motion({id:motion.id})">{{ ::motion.title }}</p>

      <quick-vote></quick-vote>

    </md-list-item>


    <md-progress-circular style="margin:auto" class="loading-circle" md-mode="indeterminate" ng-show="sidebar.motionObj.data.length && sidebar.motionListLoading"></md-progress-circular>


    <md-list-item ng-if="sidebar.motionObj.data.length == 0 && !sidebar.motionListLoading">
      <p class="md-body-1" translate="{{'NO_MOTIONS'}}"></p>
    </md-list-item>

    <has-permission has-permission="create-motions">
      <md-list-item class="sidebar-list" ui-sref-active="active"> 
        <md-icon class="mdi mdi-plus" aria-label="create motion" ui-sref="create-motion"></md-icon>
        <p ui-sref="create-motion"> {{'CREATE_NEW_MOTION' | translate | capitalize}}</p>
      </md-list-item>
    </has-permission>
  
  </md-list>


</div>
</md-content>