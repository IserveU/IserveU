<section layout-margin layout="column" ng-class="motion.isLoading?'loading':''">

	<motion-fab-toolbar></motion-fab-toolbar>	

	<md-card flex>
		<md-card-content style="padding: 0">

		<div class="motion-contents" layout="row" layout-sm="column">
			<div flex="90" flex-sm="100" flex-order="1" flex-order-gt-sm="1" layout-padding>
	
			<h1 class="md-display-2">{{::motion.details.title}}</h1>

			<div ng-if="motion.details.section.bio || motion.details.section.budget" layout="row" layout-sm="column" layout-xs="column" flex="55" flex-sm="100" flex-xs="100" flex-md="75" flex-lg="100">
				<div layout="column" flex="50" flex-sm="100" flex-xs="100" ng-show="motion.details.section.bio">
					<h3 class="title-header">Proposed by:</h3>
					<div style="display:inline-block;">
						<img src="/uploads/{{::motion.details.section.bio.avatar}}" style="width: 100px !important; height:auto !important; vertical-align: top"/>
						<span flex="60" style="display:inline-block;">
							<p style="display:block;">{{::motion.details.section.bio.name}}, {{::motion.details.section.bio.position}}, {{::motion.details.section.bio.company_name}}</p>
							<a href="" style="display:block;">{{::motion.details.section.bio.website}}</a>
							<i style="display:block;">{{::motion.details.section.bio.description}}.</i>
						</span>
					</div>
				</div>
				<div ng-show="motion.details.section.budget">
					<h3 class="title-header">Projected Costs</h3>
					<p style="display:block">${{::motion.details.section.budget.price | number}}</p>
					<p style="display:block">{{::motion.details.section.budget.description}}</p>
				</div>
			</div>

<!-- 				<md-icon class="mdi mdi-information-outline title-icon"></md-icon>
					<h3 class="title-header">Introduction</h3>
						<p class="md-body-1" ng-bind-html="::motion.details.summary" aria-label="motionSummary"></p> -->
			
			<div>
				<md-icon class="mdi mdi-file-document title-icon"></md-icon>
					<h3 class="title-header" style="margin-bottom: 0;">Details</h3>
			</div>
			<div flex="55" flex-sm="100" flex-xs="100" flex-md="90" flex-lg="75">
				<p class="md-body-1" ng-bind-html="::motion.details.text"></p>
			</div>

				<span ng-if="motionFile.hasData">
					<md-icon class="mdi mdi-chart-bar title-icon"></md-icon>
						<h3 class="title-header">Resources</h3>

					<div flex ng-repeat="file in motionFile.data" layout-padding>
						<a href="/uploads/{{file.filename}}" ng-bind="(file.title ? file.title : file.filename)" download></a>
					</div>
				</span>
			</div>
				
				<!-- TODO: make this into a directive -->
				<div flex="10" flex-sm="100" flex-order-sm="1" flex-order="2" flex-order-gt-sm="2" layout-padding>
					<div layout-padding class="listgrid">
					    <md-grid-list md-cols-sm="3" md-cols-md="1" md-cols-gt-md="1" md-row-height-gt-md="1:1" md-row-height="1:1" md-gutter="16px">
					    
						    <md-grid-tile class="md-whiteframe-z1">
							    <md-icon md-svg-icon="/themes/{{::themename}}/department_icons/{{::motion.details.icon}}.svg"></md-icon>
							    <md-tooltip md-direction="left">{{ motion.details.department }}</md-tooltip>
						    </md-grid-tile>

						    <md-grid-tile ng-if="motion.details.closing !== null" class="md-whiteframe-z1">
							    <md-icon md-svg-icon="/themes/{{::themename}}/icons/calendar-remove.svg" ng-if="!motion.details.MotionOpenForVoting" hide-sm>
							    	<md-tooltip md-direction="left">{{'CLOSED' | translate}}</md-tooltip>
							    </md-icon>

							    <md-icon ng-if="!motion.details.MotionOpenForVoting" md-svg-icon="/themes/{{::themename}}/icons/calendar-remove.svg" hide-md hide-gt-md>
							    	<md-tooltip>{{'CLOSED' | translate}}</md-tooltip>
							    </md-icon>

							    <md-icon ng-if="motion.details.MotionOpenForVoting" md-svg-icon="/themes/{{::themename}}/icons/calendar-clock.svg" hide-sm>
							    	<md-tooltip md-direction="left">{{ 'CLOSES_ON' | translate }} {{ motion.details.closing.alpha_date }}</md-tooltip>
							    </md-icon>

							    <md-icon ng-if="motion.details.MotionOpenForVoting" md-svg-icon="/themes/{{::themename}}/icons/calendar-clock.svg" hide-md hide-gt-md >
							    	<md-tooltip>{{ 'CLOSES_ON' | translate }} {{ motion.details.closing.alpha_date }}</md-tooltip>
							    </md-icon>
						    </md-grid-tile>

						    <md-grid-tile class="md-whiteframe-z1 {{ votes.getOverallPosition() }}">
							  	<md-icon md-svg-icon="/themes/{{::themename}}/icons/{{ votes.getOverallPosition() }}.svg"  ng-if="votes.getOverallPosition()"></md-icon>
							  	<md-icon md-svg-src="/themes/{{::themename}}/loading.svg" ng-show="!votes.getOverallPosition()"></md-icon>
							    <md-tooltip md-direction="left" ng-if="votes.getOverallPosition() != 'thumbs-up-down'">Most people {{ votes.getOverallPosition() == 'thumb-up' ? 'agree' : 'disagree' }}</md-tooltip>
							    <md-tooltip md-direction="left" ng-if="votes.getOverallPosition() == 'thumbs-up-down' && !vote.votes">This {{ 'MOTION' | translate }} has not been voted on.</md-tooltip>
						       <md-tooltip md-direction="left" ng-if="votes.getOverallPosition() == 'thumbs-up-down' && vote.votes">This {{ 'MOTION' | translate }} has resulted in a tie.</md-tooltip>
							    
						    </md-grid-tile>

						    <md-grid-tile class="md-whiteframe-z1">
							    <md-icon md-svg-icon="/themes/{{::themename}}/logo/symbol_mono.svg"></md-icon>
						    </md-grid-tile>
					    </md-grid-list>
					</div>
				</div>	
			</div>
		</md-card-content>
	</md-card>
		

	<vote-on-motion></vote-on-motion>
	<comment-on-motion></comment-on-motion>
	<display-comments></display-comments>



</section>

