<md-card class="edit-user-profile">
  
  <profile-toolbar></profile-toolbar>

  <md-card-content layout-margin>

    <div layout="row">
        <md-input-container flex>
          <label>Email</label> 
          <md-icon class="mdi mdi-email"></md-icon>
          <input type="email" ng-model="profile.email" ng-disabled="edit.disabled.email" ng-keypress="edit.pressEnter($event, 'email', profile.email)" />
        </md-input-container>
          <md-icon class="mdi mdi-pencil" ng-click="edit.switch('email')" ng-show="edit.disabled.email"></md-icon>
          <md-icon class="mdi mdi-content-save" ng-click="edit.save('email', profile.email)" ng-hide="edit.success.email || edit.disabled.email"></md-icon>
          <md-progress-circular md-diameter="35px" md-mode="indeterminate" ng-show="!edit.disabled.email && edit.success.email"></md-progress-circular>
          <md-icon class="mdi mdi-check" ng-show="edit.disabled.email && edit.success.email"></md-icon>
    </div>

    <div layout="row">
        <md-input-container flex>
          <label>Birthday</label> 
          <md-icon class="mdi mdi-cake"></md-icon>
          <input type="date" ng-model="profile.date_of_birth" ng-disabled="edit.disabled.date_of_birth" ng-keypress="edit.pressEnter($event, 'date_of_birth', profile.date_of_birth)" format-date/>
        </md-input-container>
        <md-icon class="mdi mdi-pencil edit-btn" ng-click="edit.switch('date_of_birth')" ng-show="edit.disabled.date_of_birth"></md-icon>
        <md-icon class="mdi mdi-content-save save-btn" ng-click="edit.save('date_of_birth', profile.date_of_birth)" ng-hide="edit.success.date_of_birth || edit.disabled.date_of_birth"></md-icon>
        <md-progress-circular md-diameter="35px" md-mode="indeterminate" ng-show="!edit.disabled.date_of_birth && edit.success.date_of_birth"></md-progress-circular>
        <md-icon class="mdi mdi-check" ng-show="edit.disabled.date_of_birth && edit.success.date_of_birth"></md-icon>
    </div>

    <div layout="row" ng-show="edit.field.date_of_birth">
      <md-input-container flex>
        <label>Enter in your birthday</label>
        <input type='date' ng-model='edit.new.date_of_birth' ng-keypress="edit.pressEnter($event, 'date_of_birth')" />
      </md-input-container>
        <md-icon class="mdi mdi-lock" ng-show="edit.locking.date_of_birth"></md-icon>
        <md-icon class="mdi mdi-lock-open" ng-hide="edit.locking.date_of_birth" ng-click="edit.lock('date_of_birth');">
          <md-tooltip>Save</md-tooltip>
        </md-icon>
    </div>


    <div layout="row" ng-if="edit.disabled.address">
        <md-input-container flex>
          <label>Address</label>
          <md-icon class="mdi mdi-home"></md-icon>
          <input type="text" ng-model="profile" ng-disabled="edit.disabled.address" format-address="communities"/>
        </md-input-container>
          <md-icon class="mdi mdi-pencil" ng-click="edit.switch('address')"></md-icon>

          <md-icon class="mdi mdi-check" ng-show="edit.success.address"></md-icon>
    </div>


    <div layout="column" ng-if="!edit.disabled.address" flex>
      <div layout="row" flex>
          <md-input-container flex="20">
            <label>Apt/Suite</label> 
            <md-icon class="mdi mdi-home"></md-icon>
            <input type='text' ng-model='edit.address.unit_number'/>
          </md-input-container>
          <md-input-container flex="15">
            <label>Street No.</label> 
            <input type='text' ng-model='edit.address.street_number' required/>
          </md-input-container>
          <md-input-container flex="50">
            <label>Street Name</label> 
            <input type='text' ng-model='edit.address.street_name' required/>
          </md-input-container>
          <md-input-container flex="20">
            <label>Postal Code</label> 
            <input type='text' ng-model='edit.address.postal_code' ng-keypress="edit.pressEnter($event, 'address', edit.address)" required/>
          </md-input-container>
          <md-icon class="mdi mdi-content-save" ng-click="edit.save('address', edit.address)" ng-hide="edit.success.address"></md-icon>
          <md-progress-circular md-diameter="35px" md-mode="indeterminate" ng-show="edit.success.address"></md-progress-circular>
      </div>

      <md-select style="margin-top: 0" placeholder="Which community do you reside in?" ng-model="edit.address.community_id" required>
        <md-option ng-repeat="c in communities" ng-value="c.id" required>{{c.name}}</md-option>
      </md-select>
      
    </div>

    <div layout="row">
      <md-input-container flex>
        <label>Change Password</label> 
        <md-icon class="mdi mdi-account-key"></md-icon>            
        <input type='password' ng-model="profile.password" ng-disabled="edit.disabled.password" ng-keypress="edit.pressEnter($event, 'password', profile.password)" />
      </md-input-container>
          <md-icon class="mdi mdi-pencil" ng-click="edit.switch('password')" ng-show="edit.disabled.password"></md-icon>
          <md-icon class="mdi mdi-content-save" ng-click="edit.save('password', profile.password)" ng-hide="edit.success.password || edit.disabled.password"></md-icon>
          <md-progress-circular md-diameter="35px" md-mode="indeterminate" ng-show="!edit.disabled.password && edit.success.password"></md-progress-circular>
          <md-icon class="mdi mdi-check" ng-show="edit.disabled.password && edit.success.password"></md-icon>
    </div>
  </md-card-content>
</md-card>