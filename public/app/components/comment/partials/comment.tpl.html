<section flex="100">
	<md-card ng-if="userIsLoggedIn" flex>
		<md-card-content>

		<section flex> 
			<header ng-if="!create.comment && vote.user" ng-click="create.write()" layout-padding>
				<md-icon class="mdi mdi-pencil"></md-icon>
				<h1>Write a comment</h1>
			</header>

			<div ng-show="!create.writing && !create.comment && vote.user" layout="column" layout-padding flex>
				<form layout="column" name="commentForm" flex="100"> 
					<md-input-container flex>
						<textarea columns="4" ng-model="text" required></textarea>
					</md-input-container>


					<spinner layout="row" layout-align="front end" primary-action="create.submit(vote.user.id, text)"
							 form-name="commentForm" name="'Submit'" on-hide="create.posting" 
							 secondary-btn="{control: create.writeComment, name: 'Close'}">
					</spinner>

				</form>
			</div>
		</section>

		<section ng-if="!create.writing && create.comment" flex layout-padding>

			<header> 
				<md-icon class="mdi mdi-comment-text-outline"></md-icon>
				<h1>Your comment</h1>
			</header>



			<!-- TODO: php return the number of comment votes in the thisUsersComment array -->
	<!-- 		<div class="comment-votes">
				<md-icon md-svg-src="/themes/{{::themename}}/icons/thumb-up.svg" class="md-primary"></md-icon>
				<h4 class="title-subhead">16</h4>
				<md-icon md-svg-src="/themes/{{::themename}}/icons/thumb-down.svg" class="md-accent"></md-icon>
				<h4 class="title-subhead">3</h4>		
			</div> -->

			<p class="md-body-1" ng-hide="create.editing">{{ create.comment.text }}</p>



			<div ng-show="create.editing" layout="column">
				<md-input-container>
					<textarea layout-padding aria-label="Your comment" ng-model="create.comment.text" focus-input="create.editing"></textarea>
				</md-input-container>
				<spinner layout="row" primary-action="create.update(); create.editComment()"
						 name="'Save Comment'"
						 secondary-btn="{control: create.editComment, name: 'Close'}">
				</spinner>
			</div>

			<div ng-hide="create.editing" class="inline-action-buttons" layout layout-align="end end">
				<md-button class="md-icon-button" ng-click="create.editComment()" aria-label="edit comment button">
					<md-icon class="md-primary mdi mdi-pencil"></md-icon>
				</md-button>
				<md-button class="md-icon-button" ng-click="create.delete()" aria-label="delete comment button">
					<md-icon class="md-warn mdi mdi-delete"></md-icon>
				</md-button>
			</div>


		</section>



		</md-card-content>
	</md-card>
</section>


