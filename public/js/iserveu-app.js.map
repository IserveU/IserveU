{"version":3,"sources":["app.js","components/auth/authController.js","components/auth/authService.js","components/home/homeController.js","components/login/loginController.js","components/loginModal/loginModalController.js","components/loginModal/loginModalService.js","components/motion/motionController.js","components/motion/motionService.js","components/session/sessionService.js","components/sidebar/sidebarController.js","components/sidebar/sidebarService.js","components/user/userController.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7HA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"iserveu-app.js","sourcesContent":["(function() {\n\n\t'use strict';\n\n\tangular\n\t\t.module('iserveu', ['ngResource', 'ngMaterial', 'ui.router', 'ngSanitize'])\n\t\t.config(function($provide, $stateProvider, $urlRouterProvider, $httpProvider,$mdThemingProvider) {\n\n\t\t\t$mdThemingProvider.definePalette('amazingPaletteName', {\n\t\t\t    '50': 'ffffff',\n\t\t\t    '100': '99949D',\n\t\t\t    '200': '99949D',\n\t\t\t    '300': '99949D',\n\t\t\t    '400': '38353B',\n\t\t\t    '500': '38353B',\n\t\t\t    '600': '38353B',\n\t\t\t    '700': '1C1126',\n\t\t\t    '800': '1C1126',\n\t\t\t    '900': '1C1126',\n\t\t\t    'A100': 'ff0000',\n\t\t\t    'A200': 'ff0000',\n\t\t\t    'A400': 'ff0000',\n\t\t\t    'A700': 'ff0000',\n\t\t\t    'contrastDefaultColor': 'light',    \n\t\t\t    'contrastDarkColors': ['50', '100', '200', '300', '400', 'A100'],\n\t\t\t    'contrastLightColors': undefined    // could also specify this if default was 'dark'\n\t\t\t});\n\t\t\t$mdThemingProvider.theme('default').primaryPalette('amazingPaletteName');\n\t\t\t\n\n\t\t\t$urlRouterProvider.otherwise('/home');\n\t\t\t\n\t\t\t$stateProvider\n\t\t\t\t.state('home', {\n\t\t\t\t\turl: 'home',\n\t\t\t\t\ttemplateUrl: 'app/components/home/homeView.html',\n\t\t\t\t\tcontroller: 'homeController as home',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\trequireLogin: false\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.state('motion', {\n\t\t\t\t\turl: 'motion/:motionId',\n\t\t\t\t\ttemplateUrl: 'app/components/motion/motionView.detail.html',\n\t\t\t\t\tcontroller: 'motionController as motion',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\trequireLogin: false\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.state('profile', {\n\t\t\t\t\turl: 'profile',\n\t\t\t\t\ttemplateUrl: 'app/components/user/profileView.html',\n\t\t\t\t\tcontroller: 'userController as user',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\trequireLogin: true\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.state('login', {\n\t\t\t\t\turl: 'login',\n\t\t\t\t\ttemplateUrl: 'app/components/login/loginView.html',\n\t\t\t\t\tcontroller: 'loginController as login'\n\t\t\t\t});\n\n\t\t\t$httpProvider.interceptors.push(function ($timeout, $q, $injector) {\n\t\t\t    var loginModal, $http, $state;\n\n\t\t\t    // this trick must be done so that we don't receive\n\t\t\t    // `Uncaught Error: [$injector:cdep] Circular dependency found`\n\t\t\t    $timeout(function () {\n\t\t\t     // loginModal = $injector.get('loginModal'); switch to a non modal login\n\t\t\t      $http = $injector.get('$http');\n\t\t\t      $state = $injector.get('$state');\n\t\t\t    });\n\n\t\t\t    return {\n\t\t\t      responseError: function (rejection) {\n\t\t\t        if (rejection.status !== 401) {\n\t\t\t          return rejection;\n\t\t\t        }\n\n\t\t\t        var deferred = $q.defer();\n\n\t\t\t    /*\tloginModal()\n\t\t\t          .then(function () {\n\t\t\t          \tdeferred.resolve( $http(rejection.config) );\n\t\t\t          })\n\t\t\t          .catch(function () {\n\t\t\t            $state.go('welcome');\n\t\t\t            deferred.reject(rejection);\n\t\t\t          }); */\n\n\t\t\t        return deferred.promise;\n\t\t\t      }\n\t\t\t    };\n\t\t\t  });\n\t\t\t\n\t\t})\n\t\t.run(function($rootScope, $state, /*loginModal,*/ auth) {\n\n\t\t\tauth.isLoggedIn().success(function(user) {\n\t\t\t\tif(user != \"not logged in\") {\n\t\t\t\t\t$rootScope.userIsLoggedIn = true;\n\t\t\t\t\t$rootScope.currentUser = user;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$rootScope.userIsLoggedIn = false;\n\t\t\t\t\t$rootScope.currentUser = undefined;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$rootScope.$on('$stateChangeStart', function(event, toState, toParams) {\n\t\t\t\tvar requireLogin = toState.data.requireLogin;\n\n\t\t\t\tif(requireLogin && typeof $rootScope.currentUser === 'undefined') {\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t/*\tloginModal().then(function() {\n\t\t\t\t\t\treturn $state.go(toState.name, toParams);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function() {\n\t\t\t\t\t\treturn $state.go('home');\n\t\t\t\t\t}); */\n\t\t\t\t}\n\t\t\t})\n\t\t});\n})();","","(function() {\n\n\t'use strict';\n\n\tangular\n\t\t.module('iserveu')\n\t\t.factory('auth', auth);\n\n\tfunction auth($resource, $http, $sanitize, session, CSRF_TOKEN) {\n\n\t\tvar loginError = function(response) {\n\t\t\t\n\t\t\tconsole.log(response);\n\t\t};\n\n\t\tvar sanitizeCredentials = function(credentials) {\n\t\t\treturn {\n\t\t    \temail: $sanitize(credentials.email),\n\t\t    \tpassword: $sanitize(credentials.password),\n\t\t    \tcsrf_token: CSRF_TOKEN\n\t\t  \t};\n\t\t};\n\n\t\treturn {\n\t\t\tlogin: function(credentials) {\n\t\t    \tvar login = $http.post(\"/auth/login\", sanitizeCredentials(credentials));\n\t\t    \treturn login;\n\t\t  \t},\n\t\t  \tlogout: function() {\n\t\t    \tvar logout = $http.get(\"/auth/logout\");\n\t\t    \treturn logout;\n\t\t  \t},\n\t\t  \tisLoggedIn: function() {\n\t\t    \tvar isLoggedIn = $http.get(\"api/user/loggedin\");\n\t\t    \treturn isLoggedIn;\n\t\t  \t}\n\t\t};\n\t}\n\n\t\n})();","(function() {\n\t\n\t'use strict';\n\n\tangular\n\t\t.module('iserveu')\n\t\t.controller('homeController', home);\n\n\tfunction home() {\n\n\t\tvar vm = this;\n\n\n\t}\n\n})();","(function() {\n\n\t'use strict';\n\n\tangular\n\t\t.module('iserveu')\n\t\t.controller('loginController', login);\n\n\tfunction login($scope, $http, $rootScope, $location, auth, $modal, loginModal, $state) {\n\n\t\tvar vm = this;\n\n\t\tvm.loginError = false;\n\n\t\tvm.logUserIn = function(email, password) {\n\n\t\t\tvar credentials = { email: email, password: password };\n\n\t\t\tauth.login(credentials).success(function(data) {\n\t\t\t\tvm.loginError = false;\n\t\t\t\t$rootScope.userIsLoggedIn = true;\n\t\t\t}).error(function(data) {\n\t\t\t\tconsole.log('There was an error logging in');\n\t\t\t});\t\t\t\n\t\t}\n\n\t\tvm.logUserOut = function() {\n\n\t\t\tauth.logout().success(function() {\n\t\t\t\t$rootScope.userIsLoggedIn = false;\n\t\t\t\t$state.go('home');\n\t\t\t\t$rootScope.currentUser = undefined;\n\n\t\t\t});\t\t\t\n\t\t}\n\n\t\tvm.openModal = function() {\n\t\t\t$modal.open({\n\t\t\t\ttemplateUrl: 'app/components/login/loginModalTemplate.html'\n\t\t\t});\n\t\t}\n\t\t\n\t}\n\n})();","(function() {\n\n\t'use strict';\n\n\tangular\n\t\t.module('iserveu')\n\t\t.controller('loginModalController', loginModalController);\n\n\tfunction loginModalController($scope, auth, $rootScope, $state) {\n\n\t\tvar vm = this;\n\n\t\tvm.showLoginError = false;\n\n\t\tvm.submit = function(email, password) {\n\n\t\t\tvar credentials = { email:email, password:password };\n\n\t\t\tauth.login(credentials).success(function(data, status) {\n\t\t\t\tauth.isLoggedIn().success(function(user) {\n\t\t\t\t\tif(user != \"not logged in\") {\n\t\t\t\t\t\t$rootScope.userIsLoggedIn = true;\n\t\t\t\t\t\t$rootScope.currentUser = user;\n\t\t\t\t\t\t$scope.$close(user);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t$rootScope.userIsLoggedIn = false;\n\t\t\t\t\t\t$rootScope.currentUser = undefined;\n\t\t\t\t\t\tvm.showLoginError = true;\n\t\t\t\t\t}\n\t\t\t\t});\t\t\n\t\t\t});\n\t\t}\n\n\t\tvm.cancel = function() {\n\t\t\t$scope.$dismiss();\n\t\t\t$state.go('home');\n\t\t}\n\t}\n})();","(function() {\n\n\t'use strict';\n\n\tangular\n\t\t.module('iserveu')\n\t\t.service('loginModal', loginModal);\n\n\tfunction loginModal($modal, $rootScope) {\n\n\t\tfunction assignCurrentUser(user) {\n\t\t\t$rootScope.currentUser = user;\n\t\t\treturn user;\n\t\t}\n\n\t\treturn function() {\n\t\t\tvar instance = $modal.open({\n\t\t\t\ttemplateUrl: 'app/components/loginModal/loginModalTemplate.html',\n\t\t\t\tcontroller: 'loginModalController',\n\t\t\t\tcontrollerAs: 'loginModal'\n\t\t\t});\n\n\t\t\treturn instance.result.then(assignCurrentUser);\n\t\t} \n\t}\n})();","(function() {\n\n\t'use strict';\n\n\tangular\n\t\t.module('iserveu')\n\t\t.controller('motionController', motion);\n\n\tfunction motion(motion, $stateParams, $sce, auth) {\n\n\t\tvar vm = this;\n\n\t\tvm.motionDetail = [];\n\t\tvm.loggedInUser;\n\n\t\tfunction getMotion(id) {\n\t\t\tvm.motionDetail = motion.getMotion(id);\t\t\n\t\t}\n\n\t\tfunction getLoggedInUser(id) {\n\t\t\tauth.getLoggedInUser(id).then(function(result) {\n\t\t\t\tvm.loggedInUser = result;\n\t\t\t\tconsole.log(\"Logged in user is: \" + vm.loggedInUser);\n\t\t\t},function(error){\n\t\t\t\t// a 404 error\n\t\t\t});\n\t\t\t\n\t\t}\t\t\n\n\t\tgetMotion($stateParams.motionId);\n\t\t\n\t}\n\n})();","(function() {\n\n\t'use strict';\n\n\tangular\n\t\t.module('iserveu')\n\t\t.factory('motion', motion);\n\n\tfunction motion($resource) {\n\n\t\tvar Motion = $resource('api/motion/:id');\n\n\t\tfunction getMotions() {\n\t\t\treturn Motion.query().$promise.then(function(results) {\n\t\t\t\treturn results\n\t\t\t}, function(error) {\n\t\t\t\tconsole.log(error);\n\t\t\t});\n\t\t}\n\n\t\tfunction getMotion(id) {\n\t\t\treturn Motion.query({id:id}, function(result) {\n\t\t\t\treturn result;\n\t\t\t});\n\t\t}\n\n\t\treturn {\n\t\t\tgetMotions: getMotions,\n\t\t\tgetMotion: getMotion\n\t\t}\n\t}\n})();","(function() {\n\n\t'use strict';\n\n\tangular\n\t\t.module('iserveu')\n\t\t.factory('session', session);\n\n\n\tfunction session() {\n\t\treturn {\n\t\t    get: function(key) {\n\t\t    \treturn sessionStorage.getItem(key);\n\t\t    },\n\t\t    set: function(key, val) {\n\t\t    \treturn sessionStorage.setItem(key, val);\n\t\t    },\n\t\t    unset: function(key) {\n\t\t    \treturn sessionStorage.removeItem(key);\n\t\t    }\n\t\t}\n\t}\n})();","(function() {\n\n\t'use strict';\n\n\tangular\n\t\t.module('iserveu')\n\t\t.controller('sidebarController', sidebar);\n\n\tfunction sidebar(motion, $stateParams) {\n\n\t\tvar vm = this;\n\n\t\tvm.motions = [];\n\n\t\tfunction getMotions() {\n\t\t\tmotion.getMotions().then(function(results) {\n\t\t\t\tvm.motions = results;\n\t\t\t}, function(error) {\n\t\t\t\tconsole.log(error);\n\t\t\t});\n\t\t}\n\n\t\tgetMotions();\n\t}\n})();","(function(){\n\n\t'use strict';\n\n\tangular\n\t\t.module('iserveu')\n\t\t.factory('sidebarService', sidebar);\n\n\tfunction sidebar($resource) {\n\n\t\tvar Motion = $resource('api/motion');\n\n\t\tfunction getMotions() {\n\t\t\tMotion.query().$promise.then(function(results) {\n\t\t\t\treturn results\n\t\t\t}, function(error) {\n\t\t\t\tconsole.log(error);\n\t\t\t});\n\t\t}\n\t\treturn {\n\t\t\tgetMotions: getMotions\n\t\t}\n\t}\n})();","(function() {\n\n\t'use strict';\n\n\tangular\n\t\t.module('iserveu')\n\t\t.controller('userController', user);\n\n\tfunction user($scope, auth) {\n\n\t\tvar vm = this;\n\n\t\t\n\t}\n})();"],"sourceRoot":"/source/"}